#!/usr/bin/env bash
# This script displays information about subdomains.

function check_subdomain {
    local DOMAIN=$1
    local SUBDOMAIN=$2
    local RECORD

    if [ -z "$SUBDOMAIN" ]; then
        # Default subdomains to check
        declare -a SUBDOMAINS=("www" "lb-01" "web-01" "web-02")
        for SUB in "${SUBDOMAINS[@]}"; do
            RECORD=$(dig +short "$SUB.$DOMAIN" A)
            if [ -n "$RECORD" ]; then
                echo "The subdomain $SUB is a A record and points to $RECORD"
            else
                echo "The subdomain $SUB does not have an A record."
            fi
        done
    else
        RECORD=$(dig +short "$SUBDOMAIN.$DOMAIN" A)
        if [ -n "$RECORD" ]; then
            echo "The subdomain $SUBDOMAIN is a A record and points to $RECORD"
        else
            echo "The subdomain $SUBDOMAIN does not have an A record."
        fi
    fi
}

# Main execution
if [ $# -eq 0 ]; then
    echo "Usage: $0 domain [subdomain]"
    exit 1
fi

DOMAIN=$1
SUBDOMAIN=$2

check_subdomain "$DOMAIN" "$SUBDOMAIN"


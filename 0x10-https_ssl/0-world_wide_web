#!/usr/bin/env bash

# Function to check subdomain records
check_subdomain() {
    local domain=$1
    local subdomain=$2
    local record

    # Use dig to get the A record for the subdomain
    record=$(dig +short A "$subdomain.$domain")

    # Check if the record exists
    if [[ -n $record ]]; then
        echo "The subdomain $subdomain is a A record and points to $record"
    else
        echo "The subdomain $subdomain does not have an A record."
    fi
}

# Main script logic
domain=$1
subdomain=$2

# Check if only the domain is provided
if [[ -n $domain && -z $subdomain ]]; then
    # Display information for default subdomains
    for sub in www lb-01 web-01 web-02; do
        check_subdomain "$domain" "$sub"
    done
elif [[ -n $domain && -n $subdomain ]]; then
    # Display information for the specified subdomain
    check_subdomain "$domain" "$subdomain"
else
    echo "Usage: $0 domain [subdomain]"
fi

